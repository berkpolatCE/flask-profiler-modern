import{A as m,d as s,s as i,a as n}from"./utils.js";const o=new m;function b(){const e=document.getElementById("dump-database"),t=document.getElementById("clear-database");e&&e.addEventListener("click",d),t&&t.addEventListener("click",r),u()}function d(){if(confirm("Export all profiling data?"))try{o.dumpDatabase(),s("Database export started")}catch(e){console.error("Failed to export database:",e),i("Failed to export database")}}async function r(){if(confirm("Delete all profiling data? This cannot be undone."))try{const e=document.getElementById("clear-database"),t=e.textContent;e.textContent="Clearing...",e.disabled=!0,await o.deleteDatabase(),s("Database cleared successfully"),setTimeout(()=>{window.location.reload()},1500)}catch(e){console.error("Failed to clear database:",e),i("Failed to clear database");const t=document.getElementById("clear-database");t.textContent="Clear Database",t.disabled=!1}}function u(){const e=document.getElementById("settings-display");if(e){const t={"Storage Backend":"SQLite","Data Retention":"Unlimited","Sampling Rate":"100%",Authentication:"Configured on the server"},a=n("dl",{className:"settings-list"});Object.entries(t).forEach(([c,l])=>{a.appendChild(n("dt",{text:`${c}:`})),a.appendChild(n("dd",{text:l}))}),e.innerHTML="",e.appendChild(a)}}function f(){const e=document.getElementById("dump-database"),t=document.getElementById("clear-database");e&&e.removeEventListener("click",d),t&&t.removeEventListener("click",r)}export{f as cleanupSettings,b as initSettings};

class h{constructor(e="/flask-profiler/api"){this.baseURL=e}async _fetchJson(e,a={},n={}){const s=new URL(`${this.baseURL}${e}`,window.location.origin);Object.entries(a).forEach(([o,i])=>{i!=null&&s.searchParams.append(o,i)});const r=await fetch(s,n);if(!r.ok){const o=r.statusText?` ${r.statusText}`:"";throw new Error(`HTTP ${r.status}${o}`)}return r.json()}async fetchMeasurements(e={}){return this._fetchJson("/measurements/",e)}async fetchSummary(e={}){return this._fetchJson("/measurements/grouped",e)}async fetchTimeseries(e={}){return this._fetchJson("/measurements/timeseries/",e)}async fetchMethodDistribution(e={}){return this._fetchJson("/measurements/methodDistribution/",e)}async getMeasurementDetail(e){return this._fetchJson(`/measurements/${e}`)}async deleteDatabase(){const e=await fetch("/flask-profiler/db/deleteDatabase");if(!e.ok)throw new Error(`HTTP ${e.status}`);return e.json()}dumpDatabase(){window.location.href="/flask-profiler/db/dumpDatabase"}}const f={"&":"&amp;","<":"&lt;",">":"&gt;"};function l(t){return t.replace(/[&<>]/g,e=>f[e])}function b(t){if(t===void 0)return"";const e=JSON.stringify(t,null,2);return l(e).replace(/("(?:\\u[a-fA-F0-9]{4}|\\[^u]|[^\\"])*"(?:\s*:)?|\btrue\b|\bfalse\b|\bnull\b|-?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?)/g,n=>{let s=n,r="",o="json-token-number";return s.endsWith(":")&&(r=":",s=s.slice(0,-1)),s.startsWith('"')?o=r?"json-token-key":"json-token-string":s==="true"||s==="false"?o="json-token-boolean":s==="null"?o="json-token-null":o="json-token-number",`<span class="${o}">${s}</span>${r}`})}function p(t){u(t,"success")}function g(t){u(t,"error")}function u(t,e="info"){const a=document.querySelector(".alert");a&&a.remove();const n=document.createElement("div");n.className=`alert alert-${e}`,n.textContent=t;const s=document.querySelector(".main");s?s.insertBefore(n,s.firstChild):document.body.insertBefore(n,document.body.firstChild),setTimeout(()=>{n.remove()},5e3)}const m={GET:"#28a745",POST:"#007bff",PUT:"#ffc107",DELETE:"#dc3545",PATCH:"#17a2b8",HEAD:"#6610f2",OPTIONS:"#e83e8c"},c="#6c757d";function d(t){if(!t)return c;const e=String(t).toUpperCase();return m[e]||c}function T(t){const e=document.createElement("span"),a=t?String(t).toUpperCase():"UNKNOWN";return e.className="method-badge",e.textContent=a,e.style.setProperty("--method-badge-color",d(a)),e}function E(t){const e=Number(t);return Number.isFinite(e)?`${e.toFixed(7)}s`:"â€”"}function y(t){return new Date(Number(t)*1e3).toLocaleString()}export{h as A,y as a,p as b,T as c,E as f,d as g,b as h,g as s};
